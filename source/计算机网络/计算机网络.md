# 计算机网络 


## 数据交换

在网络应用中，各端之间的数据交换主要分为两类 ： 

### 分组交换

 在分组交换中，从发送方向接收方发送一个报文时，发送方将报文划分为多个较小的数据块，称之为`分组`。每个`分组`都是通过通信链路和分组交换机进行传送。

##### 1. 存储转发传输
多数分组交换机（如路由器和链路层交换机）在链路中的输入端都采用了`存储转发传输机制`.存储转发机制是指在交换机能向链路中输出分组的第一个比特之前，需要先完整的接收整个分组。

##### 2. 排队时延和分组丢失
每个交换机都有多条链路与之相连，那么对于每条链路都会有一个```输出缓存```，它用于存储发往下一个节点的分组，但是如果某个分组到达时发现该节点正在忙于处理其他分组，则该到达的分组就需要在输出输出队列中等待。因此除了存储转发时延，分组还会有输出缓存的队列时延

但是缓存空间又是有限的，那么如果分组到到达时发现缓存已经满了，就会出现分组丢失的现象，此时该分组数据将会被丢弃

### 电路交换

电路交换主要有两种形式：

**1.频分复用 - FDM**
链路中的频谱由跨越链路创建的所有连接所共享，在连接期间，链路为每条连接专用一个频段

**2.时分复用 - TDM**
对于一条TDM链路，时间被划分为固定的帧，且每帧又被划分为固定数量的间隙。当网路跨越一条链路所创建的一条连接时，网络在帧中为该连接指定一个间隙。

**在电路交换网络中，在端系统会话期间，预留了端系统沿途通信所需的资源，但是在分组交换中不会被预留**



## 网络分层

### OSI 参考模型

  - 应用层
  - 表示层
  - 会话层
  - 传输层
  - 网络层
  - 数据链路层
  - 物理层

###  TCP/IP分层模型

- 应用层
- 传输层
- 网络层
- 数据链路层
- 物理层 

---
## 计算机网络的性能

计算机发出的信号都是二进制的,一般用比特(bit)表示,传输速率一般单位为比特率(bit/s 也可以写成 bps - bit per secodn)

### 带宽
用以描述网络中通道的传输能力,一条链路中的带宽越宽,相应的传输速率就越快


##  应用层

### 进程通信
在两个不同端系统上的进程,通过跨越计算机网络交换`报文`而相互通信.进程通过套接字软件接口向网络发送报文和接收报文.套接字是同一台主机应用层和传输层之间的接口.套接是建立网络应用程序的可编程接口,因此套接字也被称为`应用程序编程接口`.在网络通信过程中通过IP地址标识主机,并通过端口号来区分应用服务


### 相关协议

### DHCP (Dynamic Host Configration Protocol) - 主动主机配置协议 
为主机或路由器指定配置信息.在一般场景下,为主机设置IP地址会非常繁琐,为了实现的自动设置IP地址、统一管理IP地址,就产生了DHCP。
使用DHCP之前，需要假设DHCP服务器，将DHCP可分配的IP地址设置到服务器上。为了保证DHCP服务的可用性，一般会假设2台及以上的DHCP服务器。
DHCP 主要有两个部分 ： `地址管理` 和 `配置数据交付`。地址管理用于IP地址的动态分配，并为客服机提供地址租用。DHCP服务器可配置为三种方式 ： 自动分配、动态分配、手动分配
。

在动态分配中，DHCP客户机请求分配一个IP地址。服务器从可用的地址池中选择一个地址作为响应。

### DNS （Domain Name System） 
为了更方便管理主机名和IP地址之间的对应关系，DNS 由此产生。
主要的查询逻辑分为以下几个步骤：
- 客户端向DNS服务器查询IP地址
- 由于该服务器不知道域名的IP地址是什么，于是向根域名服务器进行查询
- 根域名服务器将域名服务器返回给一级DNS服务器
- 一级DNS服务器将IP地址饭会给客户端
- 客户端可以开始和对应IP地址进行通信


### HTTP

 **HTTP的发展**

- `HTTP 0.9`只是一个简单地协议，只有一个GET方法，没有首部，目标是用来获取HTML
- `HTTP 1.0` 新增首部、响应码、重定向、错误等 
- `HTTP 1.1` 中浏览器再也不用为每个请求重新发起TCP连接，增加内容有： 缓存相关首部的扩展，options方法、range请求、压缩和传输编码、管道化等
- `HTTP 2.0` 解决了HTTP中的头部阻塞问题（管道化特性让客户端可以一次发送所有请求，但是有些请求阻塞了管道化发展，如果某个其请求花了很长时间
那么队头阻塞会影响其他请求）

http 1.0中默认是关闭的，需要在http头加入"Connection: Keep-Alive"，才能启用Keep-Alive；http 1.1中默认启用Keep-Alive，如果加入"Connection: close "，才关闭。

> **Keep-Alive** 
> HTTP1.0 中 Keep-Alive默认时关闭的,需要在头部中加载Connection: Keep-Alive" 才能开启;但是在HTTP1.1中默认启用Keep-Alive,如果加入"Connection: close "才会关闭.Keep-Alive模式减少了频繁建立、释放连接所带来的消耗问题.极大的提升了

!>  TODO CARD :// KeepAlive 
 
### SMTP
用于将邮件从发送方的邮箱服务传输到接收放的邮件服务


### POP3
用于将邮件从接收方的邮箱服务器传送到发送方的用户代理


### SSL/TLS
应用层协议，工作于应用层和传输层之间。为上层数据提供加密
!> TODO CARD  :   SSL/TLS

### FTP
文件传输协议，有基于TCP的FTP 和基于UDP 的 TFTP。允许客户指定文件的类型和格式，并允许文件具有存取权限。


## 传输层协议

### TCP
- 面向连接
- 可靠的
- 面向字节流,无消息边界

#### 可靠性
  1. 拥塞避免 : 将慢启动的指数增长改为线性增长
  2. 慢启动 : 指数增长
  3. 快速重传 : 发送方只要收到三个重复确认就立即重传对方未收到的报文
  4. 快速恢复 : 他通常在快速重传之后,在快速恢复中,对于引起TCP进入快速恢复状态的缺失报文段,对收到的每个冗余的ACK,cwnd的值增加一个MSS,最终,对丢失报文段的一个ACK到达时,TCP降低cwnd后进入到拥塞避免状态


### UDP

- 无连接
- 基于数据包
- 不可靠,无序
## 网络层协议

### ICMP
Internet Control Message Protocol 
ICMP要求目标主机收到信息后,必须返回ICMP应答消息给源主机,若源主机在一定时间内收到了目标主机的应答,表明两台主机之间的网络可达.


### ARP / RARP

ARP : 在收到一个请求的时候,首先判断是本地的服务还是远程的服务,如果是远程,需要一台可达目的地的路由器,

仅仅在到达同一个IP子网的系统时,ARP才能工作

如果一个IP数据报被发送到一个IP地址,而该地址和发送方的IP前缀相同,此时数据包被直接发送到这个地址,而不经过路由器.










